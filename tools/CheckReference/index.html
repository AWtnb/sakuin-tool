<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <title>見よ項目のチェック</title>
    <base target="_blank">
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" type="text/css" href="../almond.lite.css">
    <link rel="stylesheet" type="text/css" href="../additional.css">
</head>

<body>
    <!-- ============================== -->
    <div class="container">

        <h1>見よ項目のチェック</h1>

        <div class="ui">
            <textarea class="inputLines" placeholder="paste here!"></textarea>
            <input type="button" value="チェック" id="exeButton">

        </div>

        <div class="result-markup">
            <div class="lostTo"></div>
            <div class="lostFrom"></div>
            <div class="adjacent"></div>
        </div>

    </div>
    <!-- ============================== -->
    <script type="module">
        import {setNavi} from "../common.js"
        setNavi();

        import {ReferenceChecker} from "./src.js";

        document.querySelector("#exeButton").addEventListener("click", () => {
            const checker = new ReferenceChecker(".ui .inputLines");

            const lostTo = checker.goalLostReference();
            if (lostTo.length > 0) {
                document.querySelector(".result-markup div.lostTo").innerHTML = ReferenceChecker.showResult(lostTo, "見よ項目があるのに参照先に括弧で付記されていないもの");
            }

            const lostFrom = checker.requiredFromReference();
            if (lostFrom.length > 0) {
                document.querySelector(".result-markup div.lostFrom").innerHTML = ReferenceChecker.showResult(lostFrom, "参照元として括弧書きされているのに見よ項目がないもの");
            }

            const adjacent = checker.findAdjacent();
            if (adjacent.length > 0) {
                document.querySelector(".result-markup div.adjacent").innerHTML = ReferenceChecker.showResult(adjacent, "見よ項目と見よ先項目が隣接しているもの");
            }

        });

    </script>
</body>

</html>