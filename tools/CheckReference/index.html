<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <title>見よ項目の対応関係をチェック</title>
    <base target="_blank">
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" type="text/css" href="../style.css">
    <style>
        .lostTo, .lostFrom {
            font-weight: bold;
            font-size: .8em;
            margin-top: 1em;
        }
    </style>
</head>

<body>
<!-- ============================== -->
<div class="container">
<div class="navi"><a href="/index.html">TOP</a></div>


<h2>見よ項目の対応関係をチェック</h2>

<div class="ui">
    <textarea class="inputLines"placeholder="paste here!" ></textarea>
    <input type="button" value="チェック" onclick="click_check()">

    <div class="result">
        <div class="lostTo">
            <label>見よ項目があるのに参照先に括弧で付記されていないもの：</label>
            <div class="output"></div>
        </div>
        <div class="lostFrom">
            <label>参照元として括弧書きされているのに見よ項目がないもの：</label>
            <div class="output"></div>
        </div>
    </div>
</div>

</div>
<!-- ============================== -->
<script type="text/javascript" src="../util.js" defer></script>
<script type="text/javascript" src="./src.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/ie-buster@1.1.0/dist/ie-buster.min.js"></script>
<script>

function click_check(){
    const elem = document.querySelector(".ui");
    const arr = [];
    const lines = multiline2array(elem.querySelector(".inputLines").value);
    const lostTo = findLostReferenceTo(lines).map(item => markupLostReference(item, "red"));
    elem.querySelector(".result .lostTo .output").innerHTML = (lostTo.length > 0)? lostTo.join("\n") : "<p>問題ありません！</p>";
    const lostFrom = findLostReferenceFrom(lines).map(item => markupLostReference(item, "blue"));
    elem.querySelector(".result .lostFrom .output").innerHTML = (lostFrom.length > 0)? lostFrom.join("\n") : "<p>問題ありません！</p>";
}

</script>
</body>

</html>
