import{P as B,S as C}from"./PasteBox-d5787442.js";import{A as S}from"./entryHandler-ea7f15d2.js";import{R as L}from"./ResultBox-0ca0e644.js";import{_ as A,r as c,o as p,a as m,b as d,d as n,w as _,v as y,F as f,g as h,c as b,h as N,e as G,t as v,f as U,p as x,i as D}from"./index-bc845031.js";import{n as O}from"./utils-e1f3c5ba.js";import{C as R}from"./CopyButton-871fce36.js";class E{constructor(e,o=!1){this.linesParsed=e.filter(s=>s.trim()).map(s=>{const r=s.split("	").slice(0,2);return r.length<2?{Item:String(r[0]).trimEnd(),Address:""}:(o&&r.reverse(),{Item:String(r[0]).trimEnd(),Address:String(r[1]).trim()})}),this.groupedLines=[]}group(){const e=new Map;this.linesParsed.forEach(o=>{if(e.has(o.Item)){const s=e.get(o.Item)+", "+o.Address;e.set(o.Item,s)}else e.set(o.Item,o.Address)}),e.forEach((o,s)=>{const r=new S(o);this.groupedLines.push((s+"　　"+r.formatAll()).trimEnd())})}groupByOrder(){const e=[];for(let o=0;o<this.linesParsed.length;o++){const s=this.linesParsed[o];if(o==0){e.push({Item:s.Item,Address:s.Address});continue}const r=e.length-1;if(s.Item==e[r].Item){const l=e[r].Address+", "+s.Address;e[r].Address=l}else e.push({Item:s.Item,Address:s.Address})}this.groupedLines=e.map(o=>{const s=new S(o.Address);return(o.Item+"　　"+s.formatAll()).trimEnd()})}getGroupedLines(e=!1){return e?this.groupByOrder():this.group(),this.groupedLines}}const j=""+new URL("group-9f89a249.png",import.meta.url).href,M={name:"Group",data:function(){return{content:"",lines:[],isLeft:!1,isOrdered:!1}},components:{PasteBox:B,ResultBox:L},computed:{contentLines:function(){return this.content.split(/\n/).map(t=>String(t))},resultStr:function(){return this.lines.join(`
`)}},methods:{reset:function(){this.lines=[]},executeGrouping:function(){this.reset(),new E(this.contentLines,this.isLeft).getGroupedLines(this.isOrdered).forEach(e=>{this.lines.push(e)})}}},Y=n("h2",null,"名寄せ",-1),$=n("label",{for:"isLeft"},"ノンブルが左列",-1),k=n("label",{for:"isOrdered"},"連続している項目のみ名寄せする",-1),T=n("div",null,[n("img",{src:j,alt:""}),n("em",null,[h("ノンブルの"),n("span",{style:{color:"red"}},"並び"),h("、"),n("span",{style:{color:"blue"}},"重複"),h("、"),n("span",{style:{color:"green"}},"連続"),h("を整理。記号での装飾にも対応。")])],-1);function P(t,e,o,s,r,l){const a=c("PasteBox"),i=c("ResultBox");return p(),m(f,null,[Y,d(a,{onUpdateContent:e[0]||(e[0]=u=>t.content=u.target.value),onButtonClicked:l.executeGrouping},null,8,["onButtonClicked"]),n("div",null,[_(n("input",{type:"checkbox",id:"isLeft","onUpdate:modelValue":e[1]||(e[1]=u=>t.isLeft=u)},null,512),[[y,t.isLeft]]),$]),n("div",null,[_(n("input",{type:"checkbox",id:"isOrdered","onUpdate:modelValue":e[2]||(e[2]=u=>t.isOrdered=u)},null,512),[[y,t.isOrdered]]),k]),d(i,{result:l.resultStr},null,8,["result"]),T],64)}const z=A(M,[["render",P]]),V=""+new URL("yomi_dl_release-5fbf65d3.png",import.meta.url).href,Q=""+new URL("yomi_dl01-ec508be3.png",import.meta.url).href,H=""+new URL("yomi_dl02-ca9dfe3e.png",import.meta.url).href,J=""+new URL("yomi_dl03-71cef81c.png",import.meta.url).href,X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARwAAABrCAYAAAClpD0tAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAj0SURBVHhe7dztc1RXHcBx/wnf5wUzyjBVtNORIp3WAbdpu01pGsqT0heQrGJ4SNgmVQpVkISRUnYUtIsU69AQplWgiqN00qUbnMGxBLBup8LQrQ5oEp4fHCiU2Z/n3H28e+/dvSE3J2b5ZuYz3d179+y+ud/5nZvQz9XV1QkAmEBwABhDcAAYQ3AAGENwABgzhsGJSHdPREKux+xC3T3SHSp5LdIjye6Q7RwAE9+YBSfSk5Z02q4n4n5uXahbkipO2ecR6Ul2+woVgIllTIKjJxZbXFRQesqnHR2ZsiB58QwVgAkl4OCE1GSTlB4VnGRPbkoJqYkl/3ik1HsjpVstABNagMEJSXcyWbwXoyeYpJp0KsWmfMqxtlV6nR6J6OORskkJwIQ2Zvdw9LZK35epONnorVbh5rCehAgOUMsCD04ooiKSLJlaypTf22HCAe4dAQZH/3Ypad27iej7Ni6/aQp1Jx3BYcIB7h1jtKXyHxwmHODeMXbBKQ1JieoTTslxggPUlHGfcKzgqLDoGCW788HJB6vkt14AJrwxCg4AOBEcAMYQHADGEBwAxhAcAMYQHADGEBwAxhAcAMYQHADGEBwAxhAcAMYQHADGEBwAxhAcAMYQHADGEBwAxhAcAMYQHADGEBwAxpgPTjguaemTaNjlmENUnVntR63l+l4A/28MBycscf0/R+/Toi7Hy+ngVAqKOp6OS9j1WBkdurTbWvo7qWxFi6+F1Qv+vh+AkTAanKgOTTzseOwtuOBE1ahUGhUdmmi8T01buTmp7Fh5hACMXsXgTJ482fX1UpMmTfJxnrq4HVNN8TXvYOgLP4DgWNNN2XmqQNbEE/aIiy6U3+kJgC8VgzN//nyZPn266zFNx0afU19f73rcEtZR0Neu2zSTjY6qjsSj7seDCI61RfKcprymGT1dpSXu614TAD8qBicfFLfo5I+F1YRQfiyrJCb6otUTg8uPvtDD0bgVJWd4sjGo+FM1OF5ByfM+7tyGARiNqvdw3KJTPTZaVOLxStslJx0e+2+vgphwqk0q3sGpPBkBGClfN41Lo+MvNkEJKjiV1hh9cKZMmQLAB1/B0fKhWbRo0Qhjoy/4Kj+e0WDCAWqJ7+BoOjozZ850PXZ39MWernCfpNp04ic42c+4m+BwDwcI1oiCE7Tqf2AXRHCy4eC3VMD4G7fghFUFHH8b46Av+io/PoLj+nc4BR7ByVaq+toAfBuX4PiLjeZjwql4PM972+Quuw1jOwUEa1y3VEZ5/lsqp+pbPQB3494JDoBxR3AAGENwABhDcAAYQ3AAGENwABhDcAAYQ3AAGDOq4MyYMQMAfBt1cDo7OwHAl8CD8+q6Z+Tj30yVC+9Nkw/2f0M2rl1svd4e7ZDW9hckunqdvNT1iryybYfEX98j39u0S5a0rXasA6D2BBqc76z8vpza9UXJ/P0Ryfx7rmT++bScPrxUjn+YlqELV+Szz+7InTt22w9/Io+t2GxbB0BtCjQ44baYpN/6smROPiqZ4W+r6MyTc8fb5OqFM/Lppzfk9u3bcuvWLZt9x87IrPattnUA1KZAgzN75aZscE7Vy39PN8m1j2bL7fTTcufU43J9YJZcSG2Wmzdvyo0bNwoO/2NQHl613bYOgNoUaHDmrOgqBOfaycbslDP8LckMLpCHp31ePtx/v1y/fk25XpD61zn5evRXtnWMiCVkWFLS63YMwJgINDjzlv/QGZwhFZyzc+Twnq/J5eRX5MqVy3L16lX13yuWs8MX5MHO3bZ1ANSmQIOzaPmLkn7zS5I5WS/XTz2TDY6abi4ff1bOpv9muXTpUsHFixctD63dJx0d9i8GoPYEGpzFyzrl9J77JPPRrOxWyrpxPFcuD8yR8+fPO5w7d87ybKxPlrV12NbSelMiqd7i81hiWIYTsexztSVKDavniujNUW/u9c5etVFKSUK9OXtIbZtiMUmk9Ln6eUJiJee5bqms92bXHtbvV69Zn53qzZ2j3pt73et823oALIEGZ+nK52Xv1m9K5q8PSOaTpyRzZo5kPg7L0PurrItxaGjIZnBw0LLk1aQsWf6CbS1Ltji55yoaao1ETD3O33/Rj61jOh65Y7bH2VCoRQoRKEbMIzh67UKUlMJ3KH5+r4pXIYSe5+eeAygINDjPq23RI8tj8p/+lXK5/1EZ7H9cjve1y7tH3pe3D38gu94ZkK1v/0U29P5ZOna+Jy0/75M5L/9JHuv6ozy3Yo1traySKJRe2C4XdXH6KQtJ2bme5+Xp81WwihOLksp9rvUd9POSz650PgCbQIOjTW3eIk+8tFtCq9+Q+o7tMm/NdmnZsFNWbf61/Gjbbtmy8y15rXe/bHv9TWnY8DsJd/1enuj6gyxsW+9YS9OB0NNE/r/W6+oiL2ytSs4LLDheE4pXcLzOB2ATeHAeaNkk96/YIdNW7ZSfbP2l7N27Vw4cOCAHDx6URCIh/f39cuTIEfX4kDy57reF6Mxt3+hYy6Iv8pRKQ+m9Ef2ajkXplkqFoLilGmFw9Dn56cmxdl5+SxVzbqlczwdQLvDgPNjcJfe1breis+6nr7nG5ujRo3Ls2DFpWLNLGn6834pOY7vXP2/QF7rugX2i0ZEo3cYUAjDa4Ohz9Np6o5RbO5GbsArfwZp0ip/hdn7+8wAUBR6ch5rXyxe++wsrOp2bd7rG5sSJE5JSU8uC9W9Iw/p9VnSeWvUzx1pZJTeLXY8DmCgCD86s5rVS17zNis7SjTtcYzMwMCCHDh2S534Qk4b2LdLU/rIsXvmiYy2LNU1wExaoBYEHp3XZMvlqw2KZOjsiTy5YIq2trdLc3CwLFy6UpqYmaWxstB63tLRYx9ra2qSjw/k3OJre6YjaujDdALUh8OAAgBeCA8AYggPAmFEHBwD8GlVwAGAkCA4AYwgOAGMIDgBjCA4AYwgOAGMIDgBjCA4AYwgOAGMIDgBjCA4AYwgOAGMIDgBjCA4AYwgOAGMIDgBjCA4AYwgOAGMIDgBjCA4AYwgOAGMIDgBjCA4AYwgOAGMIDgBjCA4AYwgOAGMIDgBD6uR/EigwN47HfDMAAAAASUVORK5CYII=",q=""+new URL("yomi_dl05-bed27782.png",import.meta.url).href,Z=""+new URL("yomi_dl06-6ec5b794.png",import.meta.url).href,W=""+new URL("yomi_dl07-62ba7678.png",import.meta.url).href,K={name:"DownloadGuide"},F=b('<summary>ダウンロード方法（初回のみ）</summary><div><img src="'+V+'" alt=""></div><p><a href="https://github.com/AWtnb/flet_yomi/releases">リリースページ</a>の一番上に表示されている exe ファイルをクリックするとダウンロードが始まります。100MB を超える巨大なファイルなので、余裕のある回線をご利用ください。</p><h3>ダウンロード後の流れ</h3><p>個人開発のアプリなのでダウンロード時に警告が表示されます（下記は Microsoft Edge の例）。信頼していただければ、下記の手順で有効化してください。</p><ol><li>マウスを乗せると表示されるメニューから「保存」を選択。 <div><img src="'+Q+'" alt=""></div></li><li>あらためて警告が出るので「詳細表示」をクリック。 <div><img src="'+H+'" alt=""></div></li><li>「保持する」をクリックするとダウンロードが正式に始まります。 <div><img src="'+J+'" alt=""></div></li><li>ダウンロード先のフォルダを開くと <code>yomi.exe</code> というファイルがダウンロードされているはず。 <div><img src="'+X+'" alt=""></div></li><li>アプリはこの exe 単体で動作します。適当なフォルダを作って移動させましょう。 <div><img src="'+q+'" alt=""></div></li></ol><h3>初回起動時</h3><p>おそらく初回の起動時に、Windows からの警告が表示されます。同じく信頼していただけましたら、下記の手順で有効化してください。</p><ol><li>「PC が保護されました」という表示の場合は「詳細情報」をクリック。 <div><img src="'+Z+'" alt=""></div></li><li>表示される「実行」ボタンをクリックするとアプリが起動します。 <div><img src="'+W+'" alt=""></div></li></ol>',9),ee=[F];function te(t,e,o,s,r,l){return p(),m("details",null,ee)}const oe=A(K,[["render",te]]),ne=""+new URL("yomi_demo01-8364cbd8.png",import.meta.url).href,se=""+new URL("yomi_demo02-f4b0ed71.png",import.meta.url).href,re=""+new URL("yomi_demo03-90b9cbf5.png",import.meta.url).href,ie={name:"Reading",components:{DownloadGuide:oe}},de=n("h2",null,"よみがな取得",-1),le=n("p",null,"外部アプリを使用します。",-1),ce=n("div",null,[n("img",{src:"https://github.com/AWtnb/flet_yomi/blob/master/images/demo.png?raw=true",alt:""})],-1),ae=n("p",null,[n("a",{href:"https://github.com/AWtnb/flet_yomi"},"github.com/AWtnb/flet_yomi")],-1),ue=b('<h3>作業手順</h3><h4>1. 名寄せした索引項目の読み情報を取得する</h4><div><img src="'+ne+'" alt=""></div><p>名寄せが済んだ索引をテキストボックスに貼り付けて<code>GO!</code>のボタンをクリックすると読み情報が取得されます。</p><ul><li>結果は「元の文字」「読みがな」「解析の詳細」の3列です。</li><li>オプションの意味： <ul><li><code>Skip inside: () / []</code>：括弧内の文字（見よ元項目の情報など）を無視します。</li><li><code>Skip nombles or reference (for book index)</code>：ノンブル情報（全角空白2個の後ろにある数字）、見よ先情報（<code>　→</code>の後ろにある文字）を無視します。</li></ul></li></ul><h4>2. 結果を Microsoft Excel に貼り付けてチェックする</h4><div><img src="'+se+'" alt=""></div><p><code>COPY!</code>ボタンで変換結果をコピーします。Excel を開いて貼り付けると楽にチェックできます。</p><ul><li>一番右の列で、どの単語をどう読んでいるのかがわかります。</li><li><strong>この先使用するのは左の2列だけです。</strong>3列目を見ながら、変換にミスがあれば2列目を修正していきます。</li></ul><h4>3. 必要な列をコピーする</h4><div><img src="'+re+'" alt=""></div><p>読みがなのチェック・修正が終わったら、左2列をコピーして以降のステップ（並べ替え）に進んでください。</p><ul><li>配列読みは次の並べ替えのステップで自動生成します。</li></ul>',13);function pe(t,e,o,s,r,l){const a=c("DownloadGuide");return p(),m(f,null,[de,le,ce,ae,d(a),ue],64)}const me=A(ie,[["render",pe]]),Ae={name:"Normalize",data:function(){return{content:"",removeNoise:!0}},components:{ResultBox:L},computed:{resultStr:function(){return O(this.content,this.removeNoise)}}},fe=n("summary",null,"配列読みへの変換だけ必要な場合はこちら",-1),he=n("label",{for:"removeNoise"},"カタカナ・数字・アルファベット以外を削除する",-1);function _e(t,e,o,s,r,l){const a=c("ResultBox");return p(),m("details",null,[fe,n("div",null,[_(n("input",{type:"checkbox",id:"removeNoise","onUpdate:modelValue":e[0]||(e[0]=i=>t.removeNoise=i)},null,512),[[y,t.removeNoise]]),he]),_(n("textarea",{placeholder:"paste here!","onUpdate:modelValue":e[1]||(e[1]=i=>t.content=i)},null,512),[[N,t.content]]),d(a,{result:l.resultStr},null,8,["result"])])}const ge=A(Ae,[["render",_e]]);const ve={name:"SorttedTable",props:{lines:Array,resultStr:String},components:{CopyButton:R}},we=t=>(x("data-v-e774c7f2"),t=t(),D(),t),ye={key:0,class:"limit-height"},be=we(()=>n("thead",null,[n("tr",null,[n("th",null,"項目"),n("th",null,"読み"),n("th",null,"配列読み")])],-1)),Se={class:"reading"},Be={class:"normalized-reading"};function Le(t,e,o,s,r,l){const a=c("CopyButton");return p(),m(f,null,[o.lines.length?(p(),m("div",ye,[n("table",null,[be,n("tbody",null,[(p(!0),m(f,null,G(o.lines,(i,u)=>(p(),m("tr",{key:u},[n("td",null,v(i.item),1),n("td",Se,v(i.reading),1),n("td",Be,v(i.normalized),1)]))),128))])])])):U("",!0),d(a,{copyStr:o.resultStr},null,8,["copyStr"])],64)}const xe=A(ve,[["render",Le],["__scopeId","data-v-e774c7f2"]]),De=""+new URL("sort-7a7e425b.png",import.meta.url).href;const w=(t,e)=>{const o=String(t).toLowerCase(),s=String(e).toLowerCase();return o>s?1:o<s?-1:0};class Oe{constructor(){this.parsedLines=[]}addData(e,o){this.parsedLines.push({item:e,reading:o,normalized:O(o,!0)})}execute(){return this.parsedLines.sort((e,o)=>w(e.item,o.item)).sort((e,o)=>w(e.reading,o.reading)).sort((e,o)=>w(e.normalized,o.normalized))}}const Re={name:"Sort",data:function(){return{content:"",sortedLines:[]}},components:{CopyButton:R,Normalize:ge,SortedTable:xe,PasteBox:B},computed:{contentLines:function(){return this.content.split(/\n/).map(t=>String(t))},parsedLines:function(){return this.contentLines.filter(t=>t.trim().length>0).map(t=>{const[e,o,...s]=t.split("	").map(r=>r.trim());return{item:e,reading:o}})},resultStr:function(){return this.sortedLines.map(t=>`${t.item}	${t.reading}	${t.normalized}`).join(`
`)}},methods:{reset:function(){this.sortedLines=[]},executeSort:function(){this.reset();const t=new Oe;this.parsedLines.forEach(e=>t.addData(e.item,e.reading)),t.execute().forEach(e=>{this.sortedLines.push(e)})}}},I=t=>(x("data-v-8f420620"),t=t(),D(),t),Ie=I(()=>n("h2",null,"並べ替え",-1)),Ce=b("<ul data-v-8f420620><li data-v-8f420620><code data-v-8f420620>名寄せした索引項目</code>と<code data-v-8f420620>読み</code>の2列を貼り付けてください。</li><li data-v-8f420620>内部で<code data-v-8f420620>読み</code>の情報を<code data-v-8f420620>配列読み</code>に変換して並べ替えます。 <ul data-v-8f420620><li data-v-8f420620>最優先は<code data-v-8f420620>配列読み</code>の情報。</li><li data-v-8f420620><code data-v-8f420620>配列読み</code>が同じ場合は<code data-v-8f420620>読み</code>で昇順ソート。</li><li data-v-8f420620><code data-v-8f420620>読み</code>も同じ場合は<code data-v-8f420620>項目</code>の文字コード昇順（同じ文字種がまとまります）。</li></ul></li><li data-v-8f420620><strong data-v-8f420620>1列目が最終的な索引になります。</strong></li></ul>",1),Ne=I(()=>n("div",null,[n("img",{src:De,alt:""})],-1));function Ge(t,e,o,s,r,l){const a=c("PasteBox"),i=c("SortedTable"),u=c("Normalize");return p(),m(f,null,[Ie,d(a,{onUpdateContent:e[0]||(e[0]=g=>t.content=g.target.value),onButtonClicked:l.executeSort},null,8,["onButtonClicked"]),Ce,d(i,{lines:t.sortedLines,resultStr:l.resultStr},null,8,["lines","resultStr"]),d(u),Ne],64)}const Ue=A(Re,[["render",Ge],["__scopeId","data-v-8f420620"]]),Ee={name:"FormatView",components:{SectionEnd:C,Group:z,Reading:me,Sort:Ue}},je={class:"format"},Me=n("h1",null,"索引の整形",-1);function Ye(t,e,o,s,r,l){const a=c("Group"),i=c("SectionEnd"),u=c("Reading"),g=c("Sort");return p(),m("div",je,[Me,d(a),d(i),d(u),d(i),d(g),d(i)])}const Qe=A(Ee,[["render",Ye]]);export{Qe as default};
