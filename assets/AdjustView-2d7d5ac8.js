import{S as C}from"./SectionEnd-9535eabc.js";import{_ as A,o as u,a as i,g as k,e as o,t as b,n as B,h as N,F as g,i as _,j as $,f as w,w as x,m as V,b as v,u as H,p as I,d as D}from"./index-a2a0b5ee.js";import{P as L,a as P}from"./CopyButton-cac38e08.js";import{E as U,A as S,R as F}from"./ResultBox-d5397e23.js";const R={name:"AddressDiff",props:{diffDetails:{type:Array,require:!0}}},T={key:0};function q(s,e,n,t,a,c){return u(!0),i(g,null,k(n.diffDetails,(r,f)=>(u(),i("span",{key:f},[o("del",null,b(r.before),1),o("span",{style:B({color:r.color})},b(r.text),5),r.isEnd?N("",!0):(u(),i("span",T,", "))]))),128)}const z=A(R,[["render",q],["__scopeId","data-v-fe5cb16f"]]),E=s=>isNaN(Number(s))?s.replace(/[^\d]/g,""):s,O=(s,e)=>{const n=s.map((t,a)=>{const c=e[a],r=a==s.length-1;return E(t)!=E(c)?{text:c,before:t,color:"#ff0080",isEnd:r}:{text:t,before:"",color:"#333",isEnd:r}});return{modified:n.some(t=>t.before.length>0),detail:n}};class G{constructor(e,n,t){this.start=e,this.end=n,this.delta=t}adjust(e){return Number(this.start)<=e.intValue&&e.intValue<=Number(this.end)?e.adjust(this.delta):e.text}}class J{constructor(e,n,t,a){this.lines=e,this.adjuster=new G(n,t,a)}adjust(){return this.lines.map(e=>{const n=new U(e),t=new S(n.address).rawElements,a=t.map(c=>{const r=new S(c).nombres;return r.length>1?this.adjuster.adjust(r[0])+"–"+this.adjuster.adjust(r.at(-1)):this.adjuster.adjust(r[0])});return{name:n.name,newNombres:a,comparison:O(t,a)}})}}const K=s=>(I("data-v-0a0528d3"),s=s(),D(),s),Q=K(()=>o("h2",null,"ノンブル加算減算",-1)),W={class:"config"},X={key:0},Y={__name:"PlusMinus",setup(s){const e=_(""),n=_(1),t=_(999),a=_(1),c=_([]),r=_([]),f=_(""),y=$(()=>P(e.value)),h=$(()=>c.value.map(m=>m.newNombres.length?`${m.name}　　${m.newNombres.join(", ")}`:m.name).join(`
`)),d=()=>{f.value="",c.value=[],r.value=[]},j=()=>{d();const m=new J(y.value,n.value,t.value,a.value);c.value=m.adjust(),r.value=c.value.filter(l=>l.comparison.modified).map(l=>({name:l.name,detail:l.comparison.detail})),r.value.length?f.value=r.value.length+"件の変更があります。":f.value="修正箇所はありません。"};return(m,l)=>(u(),i(g,null,[Q,o("ul",W,[o("li",null,[w("開始 "),x(o("input",{type:"number",min:"1","onUpdate:modelValue":l[0]||(l[0]=p=>n.value=p)},null,512),[[V,n.value]])]),o("li",null,[w("終了 "),x(o("input",{type:"number",min:"1","onUpdate:modelValue":l[1]||(l[1]=p=>t.value=p)},null,512),[[V,t.value]])]),o("li",null,[w("増分 "),x(o("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=p=>a.value=p)},null,512),[[V,a.value]])])]),v(L,{onUpdateContent:l[3]||(l[3]=p=>e.value=p.target.value),onButtonClicked:j}),v(F,{result:H(h)},null,8,["result"]),o("div",null,[o("h4",null,b(f.value),1),r.value.length?(u(),i("ul",X,[(u(!0),i(g,null,k(r.value,(p,M)=>(u(),i("li",{key:M},[o("span",null,b(p.name)+"　　",1),v(z,{"diff-details":p.detail},null,8,["diff-details"])]))),128))])):N("",!0)])],64))}},Z=A(Y,[["__scopeId","data-v-0a0528d3"]]);class ee{constructor(e){const n=new U(e);this.nombres=new S(n.address).nombres,this.problems=[]}checkSort(){if(!(this.nombres.length<2)){for(let e=0;e<this.nombres.length-1;e++)if(this.nombres[e].intValue>=this.nombres[e+1].intValue){this.problems.push({color:"red",text:"順番！"});break}}}checkHyphen(){if(!(this.nombres.length<3))for(let e=0;e<this.nombres.length-2;e++){const n=this.nombres[e],t=this.nombres[e+1],a=this.nombres[e+2];if(n.intValue+1==t.intValue&&n.intValue+2==a.intValue&&!t.hyphenated){this.problems.push({color:"blue",text:"連続！"});break}}}}const te=s=>(I("data-v-96efa890"),s=s(),D(),s),ne=te(()=>o("h2",null,"ノンブルの並びをチェックする",-1)),se={key:0,class:"warning"},re={key:1},ae={__name:"CheckNombre",setup(s){const e=y=>y.filter(h=>String(h).trim()).map(h=>{const d=new ee(h);return d.checkSort(),d.checkHyphen(),d.problems.length>0?{line:h,detail:d.problems}:null}).filter(Boolean),n=_(""),t=_(""),a=_([]),c=$(()=>P(n.value)),r=()=>{t.value="",a.value=[]},f=()=>{r(),a.value=e(c.value),a.value.length?t.value="修正の必要があります！":t.value="問題は見当たりません！"};return(y,h)=>(u(),i(g,null,[ne,v(L,{onUpdateContent:h[0]||(h[0]=d=>n.value=d.target.value),onButtonClicked:f}),t.value?(u(),i("strong",se,b(t.value),1)):N("",!0),a.value.length?(u(),i("ul",re,[(u(!0),i(g,null,k(a.value,(d,j)=>(u(),i("li",{key:j},[o("span",null,b(d.line),1),(u(!0),i(g,null,k(d.detail,(m,l)=>(u(),i("span",{key:l},[o("span",{style:B({color:m.color})},"←"+b(m.text),5)]))),128))]))),128))])):N("",!0)],64))}},oe=A(ae,[["__scopeId","data-v-96efa890"]]),le={class:"adjust"},ue=o("h1",null,"微調整",-1),pe={__name:"AdjustView",setup(s){return(e,n)=>(u(),i("div",le,[ue,v(Z),v(C),v(oe),v(C)]))}};export{pe as default};
