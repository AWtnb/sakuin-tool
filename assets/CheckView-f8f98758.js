import{S as ee}from"./SectionEnd-0ced33cd.js";import{a as Z,S as ne}from"./SimpleTextarea-486c6d7e.js";import{_ as Q,j as J,o as D,a as y,b as d,k as re,s as te,e as H,z as se,h as B,i as N,u as T,d as F,w as j,F as U,g as z,t as O,q as ie,p as ae,f as le,m as he}from"./index-7ebdcd51.js";import{R as G,_ as X}from"./referenceChecker-869312f1.js";import{E as K,A as ue}from"./entry-79187166.js";const fe={class:"area"},oe={key:0},ge={__name:"IgnorableArea",setup(b){const l=J(!1);return(v,o)=>(D(),y("div",fe,[d("label",null,[re(d("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=g=>l.value=g)},null,512),[[te,l.value]]),H("無視する")]),l.value?B("",!0):(D(),y("div",oe,[se(v.$slots,"default",{},void 0,!0)]))]))}},V=Q(ge,[["__scopeId","data-v-24f1f406"]]),ce={key:0},_e=d("h3",null,"見よ先の括弧書きが足りません：",-1),ve=d("thead",null,[d("tr",null,[d("th",null,"見よ項目"),d("th",null,"必要な項目")])],-1),me={__name:"FindMissingBackLink",props:{result:String},emits:["checkFinished"],setup(b,{emit:l}){const v=b,o=N(()=>{const e=new G(v.result).findMissingBackLink();return l("checkFinished",{problem:"missingBackLink",count:e.length}),e});return(g,e)=>T(o).length?(D(),y("div",ce,[_e,F(V,null,{default:j(()=>[d("table",null,[ve,d("tbody",null,[(D(!0),y(U,null,z(T(o),(n,r)=>(D(),y("tr",{key:r},[d("td",null,O(n.problem),1),d("td",null,O(n.require),1)]))),128))])])]),_:1})])):B("",!0)}},pe={key:0},de=d("h3",null,"見よ項目のすぐ隣に見よ先項目があります：",-1),be={__name:"FindAdjacent",props:{result:String},emits:["checkFinished"],setup(b,{emit:l}){const v=b,o=N(()=>{const e=new G(v.result).findAdjacent();return l("checkFinished",{problem:"adjacent",count:e.length}),e});return(g,e)=>T(o).length?(D(),y("div",pe,[de,F(V,null,{default:j(()=>[F(X,{arr:T(o)},null,8,["arr"])]),_:1})])):B("",!0)}},we={key:0},ke=d("h3",null,"見よ項目が足りません：",-1),Me=d("thead",null,[d("tr",null,[d("th",null,"括弧のある項目"),d("th",null,"必要な見よ項目")])],-1),De={__name:"CheckMissingRef",props:{result:String},emits:["checkFinished"],setup(b,{emit:l}){const v=b,o=N(()=>{const e=new G(v.result).findMissingRefs();return l("checkFinished",{problem:"missingRef",count:e.length}),e});return(g,e)=>T(o).length?(D(),y("div",we,[ke,F(V,null,{default:j(()=>[d("table",null,[Me,d("tbody",null,[(D(!0),y(U,null,z(T(o),(n,r)=>(D(),y("tr",{key:r},[d("td",null,O(n.problem),1),d("td",null,[F(X,{arr:n.require},null,8,["arr"])])]))),128))])])]),_:1})])):B("",!0)}},Ae=d("thead",null,[d("tr",null,[d("th",null,"重複項目")])],-1),W={__name:"DuplicateTable",props:{detailsArr:Array},setup(b){return(l,v)=>(D(),y("table",null,[Ae,d("tbody",null,[(D(!0),y(U,null,z(b.detailsArr,(o,g)=>(D(),y("tr",{key:g},[d("td",null,[F(X,{arr:o},null,8,["arr"])])]))),128))])]))}};class Y{constructor(l){const v=Z(l);this.entries=v.filter(o=>String(o).trim()).map(o=>new K(o)),this.refs=this.entries.filter(o=>o.isReference),this.nonRefs=this.entries.filter(o=>!o.isReference),this.mainEntries=this.nonRefs.filter(o=>!o.isChild)}getUngrouped(){const l=[];return this.mainEntries.forEach(o=>{const g=o.basename,e=this.mainEntries.filter(n=>n.basename==g).map(n=>n.rawStr);e.length!=1&&l.push(e)}),l.filter((o,g,e)=>g===e.findIndex(n=>n.join("")===o.join("")))}getConflicting(){return this.refs.map(l=>{const v=l.basename,o=this.mainEntries.filter(g=>g.basename==v);return o.length<1?null:[l.name].concat(o.map(g=>g.rawStr))}).filter(Boolean)}}const ye={key:0},Se=d("h3",null,"見よ項目が本項目として残っています：",-1),Ie={__name:"CheckConflict",props:{result:String},emits:["checkFinished"],setup(b,{emit:l}){const v=b,o=N(()=>{const e=new Y(v.result).getConflicting();return l("checkFinished",{problem:"conflictReference",count:e.length}),e});return(g,e)=>T(o).length?(D(),y("div",ye,[Se,F(V,null,{default:j(()=>[F(W,{detailsArr:T(o)},null,8,["detailsArr"])]),_:1})])):B("",!0)}},Ce={key:0},Ee=d("h3",null,"名寄せが不十分です：",-1),Fe={__name:"CheckUngrouped",props:{result:String},emits:["checkFinished"],setup(b,{emit:l}){const v=b,o=N(()=>{const e=new Y(v.result).getUngrouped();return l("checkFinished",{problem:"ungrouped",count:e.length}),e});return(g,e)=>T(o).length?(D(),y("div",Ce,[Ee,F(V,null,{default:j(()=>[F(W,{detailsArr:T(o)},null,8,["detailsArr"])]),_:1})])):B("",!0)}};const $e={key:0},Pe={key:1,inert:""},Re={key:2},Te={__name:"DiffInfo",props:{state:Number,text:String},setup(b){const l=b;return(v,o)=>(D(),y(U,null,[l.state===0?(D(),y("span",$e,O(l.text),1)):B("",!0),l.state===-1?(D(),y("del",Pe,O(l.text),1)):B("",!0),l.state===1?(D(),y("ins",Re,O(l.text),1)):B("",!0)],64))}},Be=Q(Te,[["__scopeId","data-v-f3b034cb"]]);function Le(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var q={exports:{}};(function(b){var l=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},v=-1,o=1,g=0;l.Diff=function(e,n){return[e,n]},l.prototype.diff_main=function(e,n,r,s){typeof s>"u"&&(this.Diff_Timeout<=0?s=Number.MAX_VALUE:s=new Date().getTime()+this.Diff_Timeout*1e3);var i=s;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e==n)return e?[new l.Diff(g,e)]:[];typeof r>"u"&&(r=!0);var t=r,a=this.diff_commonPrefix(e,n),h=e.substring(0,a);e=e.substring(a),n=n.substring(a),a=this.diff_commonSuffix(e,n);var u=e.substring(e.length-a);e=e.substring(0,e.length-a),n=n.substring(0,n.length-a);var f=this.diff_compute_(e,n,t,i);return h&&f.unshift(new l.Diff(g,h)),u&&f.push(new l.Diff(g,u)),this.diff_cleanupMerge(f),f},l.prototype.diff_compute_=function(e,n,r,s){var i;if(!e)return[new l.Diff(o,n)];if(!n)return[new l.Diff(v,e)];var t=e.length>n.length?e:n,a=e.length>n.length?n:e,h=t.indexOf(a);if(h!=-1)return i=[new l.Diff(o,t.substring(0,h)),new l.Diff(g,a),new l.Diff(o,t.substring(h+a.length))],e.length>n.length&&(i[0][0]=i[2][0]=v),i;if(a.length==1)return[new l.Diff(v,e),new l.Diff(o,n)];var u=this.diff_halfMatch_(e,n);if(u){var f=u[0],c=u[1],_=u[2],m=u[3],p=u[4],w=this.diff_main(f,_,r,s),M=this.diff_main(c,m,r,s);return w.concat([new l.Diff(g,p)],M)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,s):this.diff_bisect_(e,n,s)},l.prototype.diff_lineMode_=function(e,n,r){var s=this.diff_linesToChars_(e,n);e=s.chars1,n=s.chars2;var i=s.lineArray,t=this.diff_main(e,n,!1,r);this.diff_charsToLines_(t,i),this.diff_cleanupSemantic(t),t.push(new l.Diff(g,""));for(var a=0,h=0,u=0,f="",c="";a<t.length;){switch(t[a][0]){case o:u++,c+=t[a][1];break;case v:h++,f+=t[a][1];break;case g:if(h>=1&&u>=1){t.splice(a-h-u,h+u),a=a-h-u;for(var _=this.diff_main(f,c,!1,r),m=_.length-1;m>=0;m--)t.splice(a,0,_[m]);a=a+_.length}u=0,h=0,f="",c="";break}a++}return t.pop(),t},l.prototype.diff_bisect_=function(e,n,r){for(var s=e.length,i=n.length,t=Math.ceil((s+i)/2),a=t,h=2*t,u=new Array(h),f=new Array(h),c=0;c<h;c++)u[c]=-1,f[c]=-1;u[a+1]=0,f[a+1]=0;for(var _=s-i,m=_%2!=0,p=0,w=0,M=0,C=0,k=0;k<t&&!(new Date().getTime()>r);k++){for(var A=-k+p;A<=k-w;A+=2){var S=a+A,I;A==-k||A!=k&&u[S-1]<u[S+1]?I=u[S+1]:I=u[S-1]+1;for(var P=I-A;I<s&&P<i&&e.charAt(I)==n.charAt(P);)I++,P++;if(u[S]=I,I>s)w+=2;else if(P>i)p+=2;else if(m){var $=a+_-A;if($>=0&&$<h&&f[$]!=-1){var E=s-f[$];if(I>=E)return this.diff_bisectSplit_(e,n,I,P,r)}}}for(var R=-k+M;R<=k-C;R+=2){var $=a+R,E;R==-k||R!=k&&f[$-1]<f[$+1]?E=f[$+1]:E=f[$-1]+1;for(var L=E-R;E<s&&L<i&&e.charAt(s-E-1)==n.charAt(i-L-1);)E++,L++;if(f[$]=E,E>s)C+=2;else if(L>i)M+=2;else if(!m){var S=a+_-R;if(S>=0&&S<h&&u[S]!=-1){var I=u[S],P=a+I-S;if(E=s-E,I>=E)return this.diff_bisectSplit_(e,n,I,P,r)}}}}return[new l.Diff(v,e),new l.Diff(o,n)]},l.prototype.diff_bisectSplit_=function(e,n,r,s,i){var t=e.substring(0,r),a=n.substring(0,s),h=e.substring(r),u=n.substring(s),f=this.diff_main(t,a,!1,i),c=this.diff_main(h,u,!1,i);return f.concat(c)},l.prototype.diff_linesToChars_=function(e,n){var r=[],s={};r[0]="";function i(u){for(var f="",c=0,_=-1,m=r.length;_<u.length-1;){_=u.indexOf(`
`,c),_==-1&&(_=u.length-1);var p=u.substring(c,_+1);(s.hasOwnProperty?s.hasOwnProperty(p):s[p]!==void 0)?f+=String.fromCharCode(s[p]):(m==t&&(p=u.substring(c),_=u.length),f+=String.fromCharCode(m),s[p]=m,r[m++]=p),c=_+1}return f}var t=4e4,a=i(e);t=65535;var h=i(n);return{chars1:a,chars2:h,lineArray:r}},l.prototype.diff_charsToLines_=function(e,n){for(var r=0;r<e.length;r++){for(var s=e[r][1],i=[],t=0;t<s.length;t++)i[t]=n[s.charCodeAt(t)];e[r][1]=i.join("")}},l.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!=n.charAt(0))return 0;for(var r=0,s=Math.min(e.length,n.length),i=s,t=0;r<i;)e.substring(t,i)==n.substring(t,i)?(r=i,t=r):s=i,i=Math.floor((s-r)/2+r);return i},l.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!=n.charAt(n.length-1))return 0;for(var r=0,s=Math.min(e.length,n.length),i=s,t=0;r<i;)e.substring(e.length-i,e.length-t)==n.substring(n.length-i,n.length-t)?(r=i,t=r):s=i,i=Math.floor((s-r)/2+r);return i},l.prototype.diff_commonOverlap_=function(e,n){var r=e.length,s=n.length;if(r==0||s==0)return 0;r>s?e=e.substring(r-s):r<s&&(n=n.substring(0,r));var i=Math.min(r,s);if(e==n)return i;for(var t=0,a=1;;){var h=e.substring(i-a),u=n.indexOf(h);if(u==-1)return t;a+=u,(u==0||e.substring(i-a)==n.substring(0,a))&&(t=a,a++)}},l.prototype.diff_halfMatch_=function(e,n){if(this.Diff_Timeout<=0)return null;var r=e.length>n.length?e:n,s=e.length>n.length?n:e;if(r.length<4||s.length*2<r.length)return null;var i=this;function t(w,M,C){for(var k=w.substring(C,C+Math.floor(w.length/4)),A=-1,S="",I,P,$,E;(A=M.indexOf(k,A+1))!=-1;){var R=i.diff_commonPrefix(w.substring(C),M.substring(A)),L=i.diff_commonSuffix(w.substring(0,C),M.substring(0,A));S.length<L+R&&(S=M.substring(A-L,A)+M.substring(A,A+R),I=w.substring(0,C-L),P=w.substring(C+R),$=M.substring(0,A-L),E=M.substring(A+R))}return S.length*2>=w.length?[I,P,$,E,S]:null}var a=t(r,s,Math.ceil(r.length/4)),h=t(r,s,Math.ceil(r.length/2)),u;if(!a&&!h)return null;h?a?u=a[4].length>h[4].length?a:h:u=h:u=a;var f,c,_,m;e.length>n.length?(f=u[0],c=u[1],_=u[2],m=u[3]):(_=u[0],m=u[1],f=u[2],c=u[3]);var p=u[4];return[f,c,_,m,p]},l.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],s=0,i=null,t=0,a=0,h=0,u=0,f=0;t<e.length;)e[t][0]==g?(r[s++]=t,a=u,h=f,u=0,f=0,i=e[t][1]):(e[t][0]==o?u+=e[t][1].length:f+=e[t][1].length,i&&i.length<=Math.max(a,h)&&i.length<=Math.max(u,f)&&(e.splice(r[s-1],0,new l.Diff(v,i)),e[r[s-1]+1][0]=o,s--,s--,t=s>0?r[s-1]:-1,a=0,h=0,u=0,f=0,i=null,n=!0)),t++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),t=1;t<e.length;){if(e[t-1][0]==v&&e[t][0]==o){var c=e[t-1][1],_=e[t][1],m=this.diff_commonOverlap_(c,_),p=this.diff_commonOverlap_(_,c);m>=p?(m>=c.length/2||m>=_.length/2)&&(e.splice(t,0,new l.Diff(g,_.substring(0,m))),e[t-1][1]=c.substring(0,c.length-m),e[t+1][1]=_.substring(m),t++):(p>=c.length/2||p>=_.length/2)&&(e.splice(t,0,new l.Diff(g,c.substring(0,p))),e[t-1][0]=o,e[t-1][1]=_.substring(0,_.length-p),e[t+1][0]=v,e[t+1][1]=c.substring(p),t++),t++}t++}},l.prototype.diff_cleanupSemanticLossless=function(e){function n(p,w){if(!p||!w)return 6;var M=p.charAt(p.length-1),C=w.charAt(0),k=M.match(l.nonAlphaNumericRegex_),A=C.match(l.nonAlphaNumericRegex_),S=k&&M.match(l.whitespaceRegex_),I=A&&C.match(l.whitespaceRegex_),P=S&&M.match(l.linebreakRegex_),$=I&&C.match(l.linebreakRegex_),E=P&&p.match(l.blanklineEndRegex_),R=$&&w.match(l.blanklineStartRegex_);return E||R?5:P||$?4:k&&!S&&I?3:S||I?2:k||A?1:0}for(var r=1;r<e.length-1;){if(e[r-1][0]==g&&e[r+1][0]==g){var s=e[r-1][1],i=e[r][1],t=e[r+1][1],a=this.diff_commonSuffix(s,i);if(a){var h=i.substring(i.length-a);s=s.substring(0,s.length-a),i=h+i.substring(0,i.length-a),t=h+t}for(var u=s,f=i,c=t,_=n(s,i)+n(i,t);i.charAt(0)===t.charAt(0);){s+=i.charAt(0),i=i.substring(1)+t.charAt(0),t=t.substring(1);var m=n(s,i)+n(i,t);m>=_&&(_=m,u=s,f=i,c=t)}e[r-1][1]!=u&&(u?e[r-1][1]=u:(e.splice(r-1,1),r--),e[r][1]=f,c?e[r+1][1]=c:(e.splice(r+1,1),r--))}r++}},l.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,l.whitespaceRegex_=/\s/,l.linebreakRegex_=/[\r\n]/,l.blanklineEndRegex_=/\n\r?\n$/,l.blanklineStartRegex_=/^\r?\n\r?\n/,l.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],s=0,i=null,t=0,a=!1,h=!1,u=!1,f=!1;t<e.length;)e[t][0]==g?(e[t][1].length<this.Diff_EditCost&&(u||f)?(r[s++]=t,a=u,h=f,i=e[t][1]):(s=0,i=null),u=f=!1):(e[t][0]==v?f=!0:u=!0,i&&(a&&h&&u&&f||i.length<this.Diff_EditCost/2&&a+h+u+f==3)&&(e.splice(r[s-1],0,new l.Diff(v,i)),e[r[s-1]+1][0]=o,s--,i=null,a&&h?(u=f=!0,s=0):(s--,t=s>0?r[s-1]:-1,u=f=!1),n=!0)),t++;n&&this.diff_cleanupMerge(e)},l.prototype.diff_cleanupMerge=function(e){e.push(new l.Diff(g,""));for(var n=0,r=0,s=0,i="",t="",a;n<e.length;)switch(e[n][0]){case o:s++,t+=e[n][1],n++;break;case v:r++,i+=e[n][1],n++;break;case g:r+s>1?(r!==0&&s!==0&&(a=this.diff_commonPrefix(t,i),a!==0&&(n-r-s>0&&e[n-r-s-1][0]==g?e[n-r-s-1][1]+=t.substring(0,a):(e.splice(0,0,new l.Diff(g,t.substring(0,a))),n++),t=t.substring(a),i=i.substring(a)),a=this.diff_commonSuffix(t,i),a!==0&&(e[n][1]=t.substring(t.length-a)+e[n][1],t=t.substring(0,t.length-a),i=i.substring(0,i.length-a))),n-=r+s,e.splice(n,r+s),i.length&&(e.splice(n,0,new l.Diff(v,i)),n++),t.length&&(e.splice(n,0,new l.Diff(o,t)),n++),n++):n!==0&&e[n-1][0]==g?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,s=0,r=0,i="",t="";break}e[e.length-1][1]===""&&e.pop();var h=!1;for(n=1;n<e.length-1;)e[n-1][0]==g&&e[n+1][0]==g&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),h=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),h=!0)),n++;h&&this.diff_cleanupMerge(e)},l.prototype.diff_xIndex=function(e,n){var r=0,s=0,i=0,t=0,a;for(a=0;a<e.length&&(e[a][0]!==o&&(r+=e[a][1].length),e[a][0]!==v&&(s+=e[a][1].length),!(r>n));a++)i=r,t=s;return e.length!=a&&e[a][0]===v?t:t+(n-i)},l.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,s=/</g,i=/>/g,t=/\n/g,a=0;a<e.length;a++){var h=e[a][0],u=e[a][1],f=u.replace(r,"&amp;").replace(s,"&lt;").replace(i,"&gt;").replace(t,"&para;<br>");switch(h){case o:n[a]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case v:n[a]='<del style="background:#ffe6e6;">'+f+"</del>";break;case g:n[a]="<span>"+f+"</span>";break}}return n.join("")},l.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==o&&(n[r]=e[r][1]);return n.join("")},l.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==v&&(n[r]=e[r][1]);return n.join("")},l.prototype.diff_levenshtein=function(e){for(var n=0,r=0,s=0,i=0;i<e.length;i++){var t=e[i][0],a=e[i][1];switch(t){case o:r+=a.length;break;case v:s+=a.length;break;case g:n+=Math.max(r,s),r=0,s=0;break}}return n+=Math.max(r,s),n},l.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case o:n[r]="+"+encodeURI(e[r][1]);break;case v:n[r]="-"+e[r][1].length;break;case g:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},l.prototype.diff_fromDelta=function(e,n){for(var r=[],s=0,i=0,t=n.split(/\t/g),a=0;a<t.length;a++){var h=t[a].substring(1);switch(t[a].charAt(0)){case"+":try{r[s++]=new l.Diff(o,decodeURI(h))}catch{throw new Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var u=parseInt(h,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+h);var f=e.substring(i,i+=u);t[a].charAt(0)=="="?r[s++]=new l.Diff(g,f):r[s++]=new l.Diff(v,f);break;default:if(t[a])throw new Error("Invalid diff operation in diff_fromDelta: "+t[a])}}if(i!=e.length)throw new Error("Delta length ("+i+") does not equal source text length ("+e.length+").");return r},l.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=Math.max(0,Math.min(r,e.length)),e==n?0:e.length?e.substring(r,r+n.length)==n?r:this.match_bitap_(e,n,r):-1},l.prototype.match_bitap_=function(e,n,r){if(n.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var s=this.match_alphabet_(n),i=this;function t(I,P){var $=I/n.length,E=Math.abs(r-P);return i.Match_Distance?$+E/i.Match_Distance:E?1:$}var a=this.Match_Threshold,h=e.indexOf(n,r);h!=-1&&(a=Math.min(t(0,h),a),h=e.lastIndexOf(n,r+n.length),h!=-1&&(a=Math.min(t(0,h),a)));var u=1<<n.length-1;h=-1;for(var f,c,_=n.length+e.length,m,p=0;p<n.length;p++){for(f=0,c=_;f<c;)t(p,r+c)<=a?f=c:_=c,c=Math.floor((_-f)/2+f);_=c;var w=Math.max(1,r-c+1),M=Math.min(r+c,e.length)+n.length,C=Array(M+2);C[M+1]=(1<<p)-1;for(var k=M;k>=w;k--){var A=s[e.charAt(k-1)];if(p===0?C[k]=(C[k+1]<<1|1)&A:C[k]=(C[k+1]<<1|1)&A|((m[k+1]|m[k])<<1|1)|m[k+1],C[k]&u){var S=t(p,k-1);if(S<=a)if(a=S,h=k-1,h>r)w=Math.max(1,2*r-h);else break}}if(t(p+1,r)>a)break;m=C}return h},l.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},l.prototype.patch_addContext_=function(e,n){if(n.length!=0){if(e.start2===null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),s=0;n.indexOf(r)!=n.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)s+=this.Patch_Margin,r=n.substring(e.start2-s,e.start2+e.length1+s);s+=this.Patch_Margin;var i=n.substring(e.start2-s,e.start2);i&&e.diffs.unshift(new l.Diff(g,i));var t=n.substring(e.start2+e.length1,e.start2+e.length1+s);t&&e.diffs.push(new l.Diff(g,t)),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+t.length,e.length2+=i.length+t.length}},l.prototype.patch_make=function(e,n,r){var s,i;if(typeof e=="string"&&typeof n=="string"&&typeof r>"u")s=e,i=this.diff_main(s,n,!0),i.length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(e&&typeof e=="object"&&typeof n>"u"&&typeof r>"u")i=e,s=this.diff_text1(i);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r>"u")s=e,i=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")s=e,i=r;else throw new Error("Unknown call format to patch_make.");if(i.length===0)return[];for(var t=[],a=new l.patch_obj,h=0,u=0,f=0,c=s,_=s,m=0;m<i.length;m++){var p=i[m][0],w=i[m][1];switch(!h&&p!==g&&(a.start1=u,a.start2=f),p){case o:a.diffs[h++]=i[m],a.length2+=w.length,_=_.substring(0,f)+w+_.substring(f);break;case v:a.length1+=w.length,a.diffs[h++]=i[m],_=_.substring(0,f)+_.substring(f+w.length);break;case g:w.length<=2*this.Patch_Margin&&h&&i.length!=m+1?(a.diffs[h++]=i[m],a.length1+=w.length,a.length2+=w.length):w.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(a,c),t.push(a),a=new l.patch_obj,h=0,c=_,u=f);break}p!==o&&(u+=w.length),p!==v&&(f+=w.length)}return h&&(this.patch_addContext_(a,c),t.push(a)),t},l.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){var s=e[r],i=new l.patch_obj;i.diffs=[];for(var t=0;t<s.diffs.length;t++)i.diffs[t]=new l.Diff(s.diffs[t][0],s.diffs[t][1]);i.start1=s.start1,i.start2=s.start2,i.length1=s.length1,i.length2=s.length2,n[r]=i}return n},l.prototype.patch_apply=function(e,n){if(e.length==0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var s=0,i=[],t=0;t<e.length;t++){var a=e[t].start2+s,h=this.diff_text1(e[t].diffs),u,f=-1;if(h.length>this.Match_MaxBits?(u=this.match_main(n,h.substring(0,this.Match_MaxBits),a),u!=-1&&(f=this.match_main(n,h.substring(h.length-this.Match_MaxBits),a+h.length-this.Match_MaxBits),(f==-1||u>=f)&&(u=-1))):u=this.match_main(n,h,a),u==-1)i[t]=!1,s-=e[t].length2-e[t].length1;else{i[t]=!0,s=u-a;var c;if(f==-1?c=n.substring(u,u+h.length):c=n.substring(u,f+this.Match_MaxBits),h==c)n=n.substring(0,u)+this.diff_text2(e[t].diffs)+n.substring(u+h.length);else{var _=this.diff_main(h,c,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(_)/h.length>this.Patch_DeleteThreshold)i[t]=!1;else{this.diff_cleanupSemanticLossless(_);for(var m=0,p,w=0;w<e[t].diffs.length;w++){var M=e[t].diffs[w];M[0]!==g&&(p=this.diff_xIndex(_,m)),M[0]===o?n=n.substring(0,u+p)+M[1]+n.substring(u+p):M[0]===v&&(n=n.substring(0,u+p)+n.substring(u+this.diff_xIndex(_,m+M[1].length))),M[0]!==v&&(m+=M[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,i]},l.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,r="",s=1;s<=n;s++)r+=String.fromCharCode(s);for(var s=0;s<e.length;s++)e[s].start1+=n,e[s].start2+=n;var i=e[0],t=i.diffs;if(t.length==0||t[0][0]!=g)t.unshift(new l.Diff(g,r)),i.start1-=n,i.start2-=n,i.length1+=n,i.length2+=n;else if(n>t[0][1].length){var a=n-t[0][1].length;t[0][1]=r.substring(t[0][1].length)+t[0][1],i.start1-=a,i.start2-=a,i.length1+=a,i.length2+=a}if(i=e[e.length-1],t=i.diffs,t.length==0||t[t.length-1][0]!=g)t.push(new l.Diff(g,r)),i.length1+=n,i.length2+=n;else if(n>t[t.length-1][1].length){var a=n-t[t.length-1][1].length;t[t.length-1][1]+=r.substring(0,a),i.length1+=a,i.length2+=a}return r},l.prototype.patch_splitMax=function(e){for(var n=this.Match_MaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var s=e[r];e.splice(r--,1);for(var i=s.start1,t=s.start2,a="";s.diffs.length!==0;){var h=new l.patch_obj,u=!0;for(h.start1=i-a.length,h.start2=t-a.length,a!==""&&(h.length1=h.length2=a.length,h.diffs.push(new l.Diff(g,a)));s.diffs.length!==0&&h.length1<n-this.Patch_Margin;){var f=s.diffs[0][0],c=s.diffs[0][1];f===o?(h.length2+=c.length,t+=c.length,h.diffs.push(s.diffs.shift()),u=!1):f===v&&h.diffs.length==1&&h.diffs[0][0]==g&&c.length>2*n?(h.length1+=c.length,i+=c.length,u=!1,h.diffs.push(new l.Diff(f,c)),s.diffs.shift()):(c=c.substring(0,n-h.length1-this.Patch_Margin),h.length1+=c.length,i+=c.length,f===g?(h.length2+=c.length,t+=c.length):u=!1,h.diffs.push(new l.Diff(f,c)),c==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(c.length))}a=this.diff_text2(h.diffs),a=a.substring(a.length-this.Patch_Margin);var _=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);_!==""&&(h.length1+=_.length,h.length2+=_.length,h.diffs.length!==0&&h.diffs[h.diffs.length-1][0]===g?h.diffs[h.diffs.length-1][1]+=_:h.diffs.push(new l.Diff(g,_))),u||e.splice(++r,0,h)}}},l.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},l.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),s=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;s<r.length;){var t=r[s].match(i);if(!t)throw new Error("Invalid patch string: "+r[s]);var a=new l.patch_obj;for(n.push(a),a.start1=parseInt(t[1],10),t[2]===""?(a.start1--,a.length1=1):t[2]=="0"?a.length1=0:(a.start1--,a.length1=parseInt(t[2],10)),a.start2=parseInt(t[3],10),t[4]===""?(a.start2--,a.length2=1):t[4]=="0"?a.length2=0:(a.start2--,a.length2=parseInt(t[4],10)),s++;s<r.length;){var h=r[s].charAt(0);try{var u=decodeURI(r[s].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+u)}if(h=="-")a.diffs.push(new l.Diff(v,u));else if(h=="+")a.diffs.push(new l.Diff(o,u));else if(h==" ")a.diffs.push(new l.Diff(g,u));else{if(h=="@")break;if(h!=="")throw new Error('Invalid patch mode "'+h+'" in: '+u)}s++}}return n},l.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},l.patch_obj.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1==1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2==1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],s,i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case o:s="+";break;case v:s="-";break;case g:s=" ";break}r[i+1]=s+encodeURI(this.diffs[i][1])+`
`}return r.join("").replace(/%20/g," ")},b.exports=l,b.exports.diff_match_patch=l,b.exports.DIFF_DELETE=v,b.exports.DIFF_INSERT=o,b.exports.DIFF_EQUAL=g})(q);var Ne=q.exports;const Oe=Le(Ne),Ue={__name:"LineDiff",props:{from:String,to:String},setup(b){const l=b,v=N(()=>{const o=new Oe,g=o.diff_main(l.from,l.to);return o.diff_cleanupSemantic(g),g});return(o,g)=>(D(!0),y(U,null,z(T(v),(e,n)=>(D(),ie(Be,{state:e[0],text:e[1],key:n},null,8,["state","text"]))),128))}};const x=b=>(ae("data-v-8d555cc8"),b=b(),le(),b),je={key:0},Ve=x(()=>d("h3",null,"ノンブルに修正提案があります：",-1)),He=x(()=>d("ul",{class:"note"},[d("li",null,[d("del",null,"青の箇所"),H("を削除して、"),d("ins",null,"赤の箇所"),H("を追記すると正しいノンブル形式になります。")]),d("li",null,[H("マウスを使って、"),d("del",null,"青の箇所"),H("を飛ばして文字選択できます（文字選択を無効化しています）。")])],-1)),ze={__name:"CheckAddress",props:{result:String},emits:["checkFinished"],setup(b,{emit:l}){const v=b,o=e=>Z(e).filter(r=>String(r).trim()).map(r=>{const s=new K(r),i=new ue(s.address);if(i.unsorted()||i.unHyphened()){const t=s.name+s.separator;return{line:r,origial:t+s.address,formatted:t+i.formatAll()}}return null}).filter(Boolean),g=N(()=>{const e=o(v.result);return l("checkFinished",{problem:"invalidAddress",count:e.length}),e});return(e,n)=>T(g).length?(D(),y("div",je,[Ve,F(V,null,{default:j(()=>[He,d("ul",null,[(D(!0),y(U,null,z(T(g),(r,s)=>(D(),y("li",{key:s},[F(Ue,{from:r.origial,to:r.formatted},null,8,["from","to"])]))),128))])]),_:1})])):B("",!0)}},Qe=Q(ze,[["__scopeId","data-v-8d555cc8"]]),Ge={__name:"CheckFormat",setup(b){const l=J(""),v=he(new Map),o=n=>{v.set(n.problem,n.count)},g=N(()=>Array.from(v.values()).reduce((n,r)=>n+r,0)>0),e=N(()=>l.value.length<1||g.value?"":"問題ありません！");return(n,r)=>(D(),y(U,null,[F(ne,{onUpdateContent:r[0]||(r[0]=s=>l.value=s.content)}),d("p",null,[d("strong",null,O(T(e)),1)]),F(De,{result:l.value,onCheckFinished:o},null,8,["result"]),F(Fe,{result:l.value,onCheckFinished:o},null,8,["result"]),F(Qe,{result:l.value,onCheckFinished:o},null,8,["result"]),F(me,{result:l.value,onCheckFinished:o},null,8,["result"]),F(Ie,{result:l.value,onCheckFinished:o},null,8,["result"]),F(be,{result:l.value,onCheckFinished:o},null,8,["result"])],64))}},Xe={class:"check-format"},Ze=d("h1",null,"索引の体裁チェック",-1),xe={__name:"CheckView",setup(b){return(l,v)=>(D(),y("div",Xe,[Ze,F(Ge),F(ee)]))}};export{xe as default};
