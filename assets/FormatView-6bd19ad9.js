import{S as N}from"./SectionEnd-9535eabc.js";import{o as i,a as u,F as k,g as B,t as S,_ as R,i as m,e as r,w as v,v as w,f as h,k as Q,h as x,j as f,u as d,b as a,l as I,p as E,d as O,c as G,m as M}from"./index-a2a0b5ee.js";import{B as Y}from"./BeforeAfter-a38b7d7e.js";import{E as T,A as U,R as C}from"./ResultBox-d5397e23.js";import{a as D,P as V,b as X,c as H,n as q,C as F}from"./CopyButton-cac38e08.js";const W="/sakuin-tool/assets/before-e702eb7e.png",K="/sakuin-tool/assets/after-0c054fa5.png",j={__name:"SimpleList",props:{arr:Array},setup(o){return(t,s)=>(i(),u("ul",null,[(i(!0),u(k,null,B(o.arr,(e,n)=>(i(),u("li",{key:n},S(e),1))),128))]))}};const ee={class:"area"},te={key:0},se={__name:"IgnorableArea",setup(o){const t=m(!1);return(s,e)=>(i(),u("div",ee,[r("label",null,[v(r("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=n=>t.value=n)},null,512),[[w,t.value]]),h("無視する")]),t.value?x("",!0):(i(),u("div",te,[Q(s.$slots,"default",{},void 0,!0)]))]))}},L=R(se,[["__scopeId","data-v-de7ca281"]]);class P{constructor(t){const s=D(t);this.entries=s.filter(e=>String(e).trim()).map(e=>new T(e)),this.refs=this.entries.filter(e=>e.isReference),this.nonRefs=this.entries.filter(e=>!e.isReference),this.referred=this.entries.filter(e=>e.referredFrom.length>0)}findNecessarySrc(){return this.refs.map(t=>this.nonRefs.filter(e=>e.basename==t.referTo&&e.referredFrom.includes(t.basename)).length>0?null:{problem:t.name,require:`${t.referTo}（${t.basename}）`}).filter(Boolean)}findNecessaryRefs(){return this.referred.map(t=>{const s=t.referredFrom.filter(e=>this.refs.filter(l=>l.basename==e&&l.referTo==t.basename).length<1);return s.length<1?null:{problem:t.name,require:s.map(e=>`${e}　→${t.basename}`)}}).filter(Boolean)}findAdjacent(){const t=[];return this.entries.forEach((s,e)=>{if(s.isReference){const n=this.entries[e-1];n&&!n.isReference&&n.referredFrom.includes(s.basename)&&t.push(s);const l=this.entries[e+1];l&&!l.isReference&&l.referredFrom.includes(s.basename)&&t.push(s)}}),t.map(s=>s.name)}}const re={key:0},ne=r("h3",null,"見よ項目が足りません：",-1),le=r("thead",null,[r("tr",null,[r("th",null,"項目"),r("th",null,"必要な見よ項目")])],-1),oe={__name:"FindNecessaryRefs",props:{result:String},setup(o){const t=o,s=f(()=>new P(t.result).findNecessaryRefs());return(e,n)=>d(s).length?(i(),u("div",re,[ne,a(L,null,{default:I(()=>[r("table",null,[le,r("tbody",null,[(i(!0),u(k,null,B(d(s),(l,c)=>(i(),u("tr",{key:c},[r("td",null,S(l.problem),1),r("td",null,[a(j,{arr:l.require},null,8,["arr"])])]))),128))])])]),_:1})])):x("",!0)}};class ae{constructor(t,s=!1){this.linesParsed=t.filter(e=>e.trim()).map(e=>{const n=e.split("	").slice(0,2);return n.length<2?{Item:String(n[0]).trimEnd(),Address:""}:(s&&n.reverse(),{Item:String(n[0]).trimEnd(),Address:String(n[1]).trim()})}),this.groupedLines=[]}group(){const t=new Map;this.linesParsed.forEach(s=>{if(t.has(s.Item)){const e=t.get(s.Item)+", "+s.Address;t.set(s.Item,e)}else t.set(s.Item,s.Address)}),t.forEach((s,e)=>{const n=new U(s);this.groupedLines.push((e+"　　"+n.formatAll()).trimEnd())})}groupByOrder(){const t=[];for(let s=0;s<this.linesParsed.length;s++){const e=this.linesParsed[s];if(s==0){t.push({Item:e.Item,Address:e.Address});continue}const n=t.length-1;if(e.Item==t[n].Item){const l=t[n].Address+", "+e.Address;t[n].Address=l}else t.push({Item:e.Item,Address:e.Address})}this.groupedLines=t.map(s=>{const e=new U(s.Address);return(s.Item+"　　"+e.formatAll()).trimEnd()})}getGroupedLines(t=!1){return t?this.groupByOrder():this.group(),this.groupedLines}}const Z=o=>(E("data-v-a44d9570"),o=o(),O(),o),ie=Z(()=>r("h2",null,"名寄せ",-1)),ue=Z(()=>r("p",null,[h("ノンブルの"),r("span",{style:{color:"red"}},"並び"),h("、"),r("span",{style:{color:"blue"}},"重複"),h("、"),r("span",{style:{color:"green"}},"連続"),h("を整理します。記号での装飾にも対応。")],-1)),ce={__name:"Group",setup(o){const t=m(""),s=f(()=>{const g=D(t.value);return l.value?g.slice(1):g}),e=m(!1),n=m(!1),l=m(!0),c=m([]),_=()=>{c.value=[]},p=()=>{_();const g=new ae(s.value,e.value);c.value=g.getGroupedLines(n.value)},A=f(()=>c.value.join(`
`));return(g,b)=>(i(),u(k,null,[ie,a(Y,{beforePath:d(W),afterPath:d(K)},null,8,["beforePath","afterPath"]),ue,r("label",null,[v(r("input",{type:"checkbox","onUpdate:modelValue":b[0]||(b[0]=y=>l.value=y)},null,512),[[w,l.value]]),h("先頭行をスキップする")]),r("label",null,[v(r("input",{type:"checkbox","onUpdate:modelValue":b[1]||(b[1]=y=>e.value=y)},null,512),[[w,e.value]]),h("ノンブルが左列")]),r("label",null,[v(r("input",{type:"checkbox","onUpdate:modelValue":b[2]||(b[2]=y=>n.value=y)},null,512),[[w,n.value]]),h("連続している項目のみ名寄せする")]),a(V,{onUpdateContent:b[3]||(b[3]=y=>t.value=y.target.value),onButtonClicked:p}),a(C,{result:d(A)},null,8,["result"]),a(oe,{result:d(A)},null,8,["result"])],64))}},de=R(ce,[["__scopeId","data-v-a44d9570"]]),pe="/sakuin-tool/assets/yomi_demo01-8364cbd8.png",_e="/sakuin-tool/assets/yomi_demo02-f4b0ed71.png",me="/sakuin-tool/assets/yomi_demo03-90b9cbf5.png",he="/sakuin-tool/assets/yomi_dl_release-5fbf65d3.png",fe="/sakuin-tool/assets/yomi_dl01-ec508be3.png",Ae="/sakuin-tool/assets/yomi_dl02-ca9dfe3e.png",ge="/sakuin-tool/assets/yomi_dl03-71cef81c.png",ve="data:image/png;base64,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",be="/sakuin-tool/assets/yomi_dl05-bed27782.png",ye="/sakuin-tool/assets/yomi_dl06-6ec5b794.png",ke="/sakuin-tool/assets/yomi_dl07-62ba7678.png",Se={name:"DownloadGuide"},we=G('<summary>ダウンロード方法（初回のみ）</summary><div><img src="'+he+'" alt=""></div><p><a href="https://github.com/AWtnb/flet_yomi/releases">リリースページ</a>の一番上に表示されている exe ファイルをクリックするとダウンロードが始まります。100MB を超える巨大なファイルなので、余裕のある回線をご利用ください。</p><h3>ダウンロード後の流れ</h3><p>個人開発のアプリなのでダウンロード時に警告が表示されます（下記は Microsoft Edge の例）。信頼していただければ、下記の手順で有効化してください。</p><ol><li>マウスを乗せると表示されるメニューから「保存」を選択。 <div><img src="'+fe+'" alt=""></div></li><li>あらためて警告が出るので「詳細表示」をクリック。 <div><img src="'+Ae+'" alt=""></div></li><li>「保持する」をクリックするとダウンロードが正式に始まります。 <div><img src="'+ge+'" alt=""></div></li><li>ダウンロード先のフォルダを開くと <code>yomi.exe</code> というファイルがダウンロードされているはず。 <div><img src="'+ve+'" alt=""></div></li><li>アプリはこの exe 単体で動作します。適当なフォルダを作って移動させましょう。 <div><img src="'+be+'" alt=""></div></li></ol><h3>初回起動時</h3><p>おそらく初回の起動時に、Windows からの警告が表示されます。同じく信頼していただけましたら、下記の手順で有効化してください。</p><ol><li>「PC が保護されました」という表示の場合は「詳細情報」をクリック。 <div><img src="'+ye+'" alt=""></div></li><li>表示される「実行」ボタンをクリックするとアプリが起動します。 <div><img src="'+ke+'" alt=""></div></li></ol>',9),xe=[we];function Be(o,t,s,e,n,l){return i(),u("details",null,xe)}const Re=R(Se,[["render",Be]]),Ie=r("summary",null,"カタカナひらがな相互変換",-1),Le={__name:"JaConv",setup(o){const t=m(""),s=f(()=>t.value.replace(/[\u30a1-\u30f4\u3041-\u3093]/g,e=>e.match(/[\u30a1-\u30f4]/)?X(e):H(e)));return(e,n)=>(i(),u("details",null,[Ie,v(r("textarea",{"onUpdate:modelValue":n[0]||(n[0]=l=>t.value=l)},null,512),[[M,t.value]]),a(C,{result:d(s)},null,8,["result"])]))}},Ce=r("summary",null,"ローマ字に変換",-1),De=r("ul",null,[r("li",null,[h("ヘボン式ローマ字に従っています。 "),r("ul",null,[r("li",null,"拗音は「ゃ」「ゅ」「ょ」にのみ対応しています。")])]),r("li",null,[h("変換できなかった文字はそのまま表示します。 "),r("ul",null,[r("li",null,"長音（ー）ならびに「ぁ」「ぃ」「ぅ」「ぇ」「ぉ」には非対応です。"),r("li",null,"日本語に登場する頻度の低い「ヴ」や、その他の表記が定まらないケースにも非対応です。")])])],-1),Ne={__name:"Romanize",setup(o){const t=new Map;[["ア","A"],["イ","I"],["ウ","U"],["エ","E"],["オ","O"],["カ","Ka"],["キ","Ki"],["ク","Ku"],["ケ","Ke"],["コ","Ko"],["サ","Sa"],["シ","Shi"],["ス","Su"],["セ","Se"],["ソ","So"],["タ","Ta"],["チ","Chi"],["ツ","Tsu"],["テ","Te"],["ト","To"],["ナ","Na"],["ニ","Ni"],["ヌ","Nu"],["ネ","Ne"],["ノ","No"],["ハ","Ha"],["ヒ","Hi"],["フ","Fu"],["ヘ","He"],["ホ","Ho"],["マ","Ma"],["ミ","Mi"],["ム","Mu"],["メ","Me"],["モ","Mo"],["ヤ","Ya"],["ユ","Yu"],["ヨ","Yo"],["ラ","Ra"],["リ","Ri"],["ル","Ru"],["レ","Re"],["ロ","Ro"],["ワ","Wa"],["ヲ","Wo"],["ン","N"],["ガ","Ga"],["ギ","Gi"],["グ","Gu"],["ゲ","Ge"],["ゴ","Go"],["ザ","Za"],["ジ","Ji"],["ズ","Zu"],["ゼ","Ze"],["ゾ","Zo"],["ダ","Da"],["ヂ","Di"],["ヅ","Zu"],["デ","De"],["ド","Do"],["バ","Ba"],["ビ","Bi"],["ブ","Bu"],["ベ","Be"],["ボ","Bo"],["パ","Pa"],["ピ","Pi"],["プ","Pu"],["ペ","Pe"],["ポ","Po"],["ャ","Lya"],["ュ","Lyu"],["ョ","Lyo"],["ッ","Ltu"]].forEach(l=>t.set(...l));const s=l=>{let c=H(l);for(let _ of t.keys()){const p=new RegExp(_,"g");c=c.replace(p,t.get(_))}return c=c.replace(/([CS]h|J)iLy(.)/g,"$1$2").replace(/([A-Z])iL(y.)/g,"$1$2").replace(/Ltu(.)/g,"$1$1"),c.toLowerCase()},e=m(""),n=f(()=>s(e.value));return(l,c)=>(i(),u("details",null,[Ce,De,v(r("textarea",{"onUpdate:modelValue":c[0]||(c[0]=_=>e.value=_)},null,512),[[M,e.value]]),a(C,{result:d(n)},null,8,["result"])]))}},$e=r("h2",null,"よみがな取得",-1),Ee=r("p",null,[r("a",{href:"https://github.com/AWtnb/flet_yomi/releases"},"外部アプリ"),h("を使用します。")],-1),Oe=G('<h3>作業手順</h3><h4>1. 名寄せした索引項目の読み情報を取得する</h4><div><img src="'+pe+'" alt=""></div><p>名寄せが済んだ索引をテキストボックスに貼り付けて<code>GO!</code>のボタンをクリックすると読み情報が取得されます。</p><ul><li>結果は「元の文字」「読みがな」「解析の詳細」の3列です。</li><li>オプションの意味： <ul><li><code>Skip inside: () / []</code>：括弧内の文字（見よ元項目の情報など）を無視します。</li><li><code>Skip nombles or reference (for book index)</code>：ノンブル情報（全角空白2個の後ろにある数字）、見よ先情報（<code>　→</code>の後ろにある文字）を無視します。</li></ul></li></ul><h4>2. 結果を Microsoft Excel に貼り付けてチェックする</h4><div><img src="'+_e+'" alt=""></div><p><code>COPY!</code>ボタンで変換結果をコピーします。Excel を開いて貼り付けると楽にチェックできます。</p><ul><li>一番右の列で、どの単語をどう読んでいるのかがわかります。</li><li><strong>この先使用するのは左の2列だけです。</strong>3列目を見ながら、変換にミスがあれば2列目を修正していきます。</li></ul>',9),Ge=r("h4",null,"3. 必要な列をコピーする",-1),Me=r("div",null,[r("img",{src:me,alt:""})],-1),je=r("p",null,"読みがなのチェック・修正が終わったら、左2列をコピーして以降のステップ（並べ替え）に進んでください。",-1),Pe=r("ul",null,[r("li",null,"配列読みは次の並べ替えのステップで自動生成します。")],-1),Ue={__name:"Reading",setup(o){return(t,s)=>(i(),u(k,null,[$e,Ee,a(Re),Oe,a(Le),a(Ne),Ge,Me,je,Pe],64))}},Ye="/sakuin-tool/assets/before-5b114135.png",Te="/sakuin-tool/assets/after-1f9d2399.png",Ve=r("summary",null,"配列読みへの変換だけ必要な場合はこちら",-1),He={__name:"Normalize",setup(o){const t=m(""),s=m(!0),e=f(()=>q(t.value,s.value));return(n,l)=>(i(),u("details",null,[Ve,r("label",null,[v(r("input",{type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c)},null,512),[[w,s.value]]),h("カタカナ・数字・アルファベット以外を削除する")]),v(r("textarea",{placeholder:"paste here!","onUpdate:modelValue":l[1]||(l[1]=c=>t.value=c)},null,512),[[M,t.value]]),a(C,{result:d(e)},null,8,["result"])]))}},qe={key:0},Ze=r("h3",null,"見よ先の括弧書きが足りません：",-1),ze=r("thead",null,[r("tr",null,[r("th",null,"見よ項目"),r("th",null,"必要な項目")])],-1),Je={__name:"FindNecessarySrc",props:{result:String},setup(o){const t=o,s=f(()=>new P(t.result).findNecessarySrc());return(e,n)=>d(s).length?(i(),u("div",qe,[Ze,a(L,null,{default:I(()=>[r("table",null,[ze,r("tbody",null,[(i(!0),u(k,null,B(d(s),(l,c)=>(i(),u("tr",{key:c},[r("td",null,S(l.problem),1),r("td",null,S(l.require),1)]))),128))])])]),_:1})])):x("",!0)}},Qe={key:0},Xe=r("h3",null,"見よ項目のすぐ隣に見よ先項目があります：",-1),Fe={__name:"FindAdjacent",props:{result:String},setup(o){const t=o,s=f(()=>new P(t.result).findAdjacent());return(e,n)=>d(s).length?(i(),u("div",Qe,[Xe,a(L,null,{default:I(()=>[a(j,{arr:d(s)},null,8,["arr"])]),_:1})])):x("",!0)}},We=r("thead",null,[r("tr",null,[r("th",null,"重複項目")])],-1),z={__name:"DuplicateTable",props:{detailsArr:Array},setup(o){return(t,s)=>(i(),u("table",null,[We,r("tbody",null,[(i(!0),u(k,null,B(o.detailsArr,(e,n)=>(i(),u("tr",{key:n},[r("td",null,[a(j,{arr:e},null,8,["arr"])])]))),128))])]))}};class J{constructor(t){const s=D(t);this.entries=s.filter(e=>String(e).trim()).map(e=>new T(e)),this.refs=this.entries.filter(e=>e.isReference),this.nonRefs=this.entries.filter(e=>!e.isReference),this.mainEntries=this.nonRefs.filter(e=>!e.isChild),this.referred=this.entries.filter(e=>e.referredFrom.length>0),this.nonReferred=this.entries.filter(e=>e.referredFrom.length<1)}getUngrouped(){const t=[];return this.mainEntries.forEach(s=>{const e=s.basename,n=this.mainEntries.filter(l=>l.basename==e);n.length!=1&&(t.map(l=>l.id).includes(e)||t.push({id:e,detail:n.map(l=>l.rawStr)}))}),t.map(s=>s.detail)}getConflicting(){return this.refs.map(t=>{const s=t.basename,e=this.mainEntries.filter(n=>n.basename==s);return e.length<1?null:[t.name].concat(e.map(n=>n.rawStr))}).filter(Boolean)}}const Ke={key:0},et=r("h3",null,"見よ項目が本項目として残っています：",-1),tt={__name:"CheckConflict",props:{result:String},setup(o){const t=o,s=f(()=>new J(t.result).getConflicting());return(e,n)=>d(s).length?(i(),u("div",Ke,[et,a(L,null,{default:I(()=>[a(z,{detailsArr:d(s)},null,8,["detailsArr"])]),_:1})])):x("",!0)}},st={key:0},rt=r("h3",null,"名寄せが不十分です：",-1),nt={__name:"CheckUngrouped",props:{result:String},setup(o){const t=o,s=f(()=>new J(t.result).getUngrouped());return(e,n)=>d(s).length?(i(),u("div",st,[rt,a(L,null,{default:I(()=>[a(z,{detailsArr:d(s)},null,8,["detailsArr"])]),_:1})])):x("",!0)}};const lt=o=>(E("data-v-a4b4adba"),o=o(),O(),o),ot={key:0},at={class:"limit-height"},it=lt(()=>r("thead",null,[r("tr",null,[r("th",null,"項目"),r("th",null,"読み"),r("th",null,"配列読み")])],-1)),ut={class:"reading"},ct={class:"normalized-reading"},dt={__name:"SortResult",props:{sortedArr:Array},setup(o){const t=o,s=m(!0),e=f(()=>t.sortedArr.map(l=>l.item).join(`
`)),n=f(()=>s.value?t.sortedArr.map(l=>`${l.item}	${l.reading}	${l.normalized}`).join(`
`):e.value);return(l,c)=>o.sortedArr.length?(i(),u("div",ot,[r("div",at,[r("table",null,[it,r("tbody",null,[(i(!0),u(k,null,B(o.sortedArr,(_,p)=>(i(),u("tr",{key:p},[r("td",null,S(_.item),1),r("td",ut,S(_.reading),1),r("td",ct,S(_.normalized),1)]))),128))])])]),a(F,{copyStr:d(n)},null,8,["copyStr"]),r("label",null,[v(r("input",{type:"checkbox","onUpdate:modelValue":c[0]||(c[0]=_=>s.value=_)},null,512),[[w,s.value]]),h("3列ともコピーする")]),a(Je,{result:d(e)},null,8,["result"]),a(Fe,{result:d(e)},null,8,["result"]),a(nt,{result:d(e)},null,8,["result"]),a(tt,{result:d(e)},null,8,["result"])])):x("",!0)}},pt=R(dt,[["__scopeId","data-v-a4b4adba"]]),$=(o,t)=>{const s=String(o).toLowerCase(),e=String(t).toLowerCase();return s>e?1:s<e?-1:0};class _t{constructor(){this.parsedLines=[]}addData(t,s){this.parsedLines.push({item:t,reading:s,normalized:q(s,!0)})}execute(){return this.parsedLines.sort((t,s)=>$(t.item,s.item)).sort((t,s)=>$(t.reading,s.reading)).sort((t,s)=>$(t.normalized,s.normalized))}}const mt=o=>(E("data-v-6eb02d36"),o=o(),O(),o),ht=mt(()=>r("h2",null,"並べ替え",-1)),ft=G("<p data-v-6eb02d36><code data-v-6eb02d36>読み</code>の情報を<code data-v-6eb02d36>配列読み</code>に変換して並べ替えます。<strong data-v-6eb02d36>1列目が最終的な索引になります。</strong></p><ul data-v-6eb02d36><li data-v-6eb02d36>最優先は<code data-v-6eb02d36>配列読み</code>の情報。</li><li data-v-6eb02d36><code data-v-6eb02d36>配列読み</code>が同じ場合は<code data-v-6eb02d36>読み</code>で昇順ソート。</li><li data-v-6eb02d36><code data-v-6eb02d36>読み</code>も同じ場合は<code data-v-6eb02d36>項目</code>の文字コード昇順（同じ文字種がまとまります）。</li></ul>",2),At={__name:"Sort",setup(o){const t=m(""),s=m([]),e=m(!0),n=f(()=>{const p=D(t.value);return e.value?p.slice(1):p}),l=f(()=>n.value.filter(p=>p.trim().length>0).map(p=>{const[A,g,...b]=p.split("	").map(y=>y.trim());return{item:A,reading:g}})),c=()=>{s.value=[]},_=()=>{c();const p=new _t;l.value.forEach(A=>p.addData(A.item,A.reading)),s.value=p.execute()};return(p,A)=>(i(),u(k,null,[ht,a(He),a(Y,{beforePath:d(Ye),afterPath:d(Te)},null,8,["beforePath","afterPath"]),ft,r("label",null,[v(r("input",{type:"checkbox","onUpdate:modelValue":A[0]||(A[0]=g=>e.value=g)},null,512),[[w,e.value]]),h("先頭行をスキップする")]),a(V,{onUpdateContent:A[1]||(A[1]=g=>t.value=g.target.value),onButtonClicked:_}),a(pt,{sortedArr:s.value},null,8,["sortedArr"])],64))}},gt=R(At,[["__scopeId","data-v-6eb02d36"]]),vt={class:"format"},bt=r("h1",null,"索引の整形",-1),Bt={__name:"FormatView",setup(o){return(t,s)=>(i(),u("div",vt,[bt,a(de),a(N),a(Ue),a(N),a(gt),a(N)]))}};export{Bt as default};
