import{S}from"./SectionEnd-6e6708e7.js";import{_ as C,o as a,a as o,F as $,g as L,b as n,t as y,h as k,e as _,r as M,d as p,j as f,i as h,k as v,A as x,u as g,v as V,p as N,f as B}from"./index-be9679df.js";import{S as w,a as A}from"./SimpleTextarea-d6252d0f.js";import{E as P,A as T}from"./entry-79187166.js";import{R as F}from"./ResultBox-88a1ad7b.js";import{_ as I}from"./LineDiff-793d7432.js";import"./CopyButton-fadf5198.js";const R={name:"PossibleList",props:{children:Array}},D={key:0},W={key:1};function H(d,t,e,s,i,u){return a(),o("ul",null,[(a(!0),o($,null,L(e.children,(l,r)=>(a(),o("li",{key:r},[n("span",null,[l.pre.length?(a(),o("mark",D,y(l.pre),1)):k("",!0),_(y(l.rest),1),l.post.length?(a(),o("mark",W,y(l.post),1)):k("",!0)])]))),128))])}const O=C(R,[["render",H]]),q={name:"FoundTable",components:{PossibleList:O},props:{found:Array}},z={key:0},G={class:"limit-height"},J=n("thead",null,[n("tr",null,[n("th",null,"項目"),n("th",null,"子項目候補")])],-1);function K(d,t,e,s,i,u){const l=M("PossibleList");return e.found.length?(a(),o("div",z,[n("div",G,[n("table",null,[J,n("tbody",null,[(a(!0),o($,null,L(e.found,(r,j)=>(a(),o("tr",{key:j},[n("td",null,y(r.parent),1),n("td",null,[p(l,{children:r.children},null,8,["children"])])]))),128))])])])])):k("",!0)}const Q=C(q,[["render",K]]);class X{constructor(t,e){this.name=t,this.mode=e,this.modified=!1,this.pre="",this.post="",this.rest=""}search(t){(this.mode=="all"||this.mode=="head")&&this.name.startsWith(t)&&(this.pre=t,this.modified=!0),this.rest=this.name.substring(this.pre.length),(this.mode=="all"||this.mode=="tail")&&this.name.endsWith(t)&&(this.post=t,this.modified=!0),this.rest=this.rest.substring(0,this.rest.length-this.post.length)}}class Y{constructor(t,e="tail"){this.mode=e,this.mainEntries=t.filter(s=>String(s).trim()).map(s=>new P(s)).filter(s=>!s.isReference&&!s.isChild).map(s=>({name:s.name,basename:s.basename}))}findPossibles(){return this.mainEntries.map(t=>{const e=t.basename,s=this.mainEntries.filter(i=>i.basename!=e).map(i=>{const u=new X(i.basename,this.mode);return u.search(e),u.modified?u:null}).filter(Boolean);return{parent:t.name,children:s}}).filter(t=>t.children.length>0).sort((t,e)=>e.parent.length-t.parent.length)}}const Z=n("h2",null,"子項目候補をチェックする",-1),ee={__name:"CheckChild",setup(d){const t=f(""),e=f("all"),s=h(()=>A(t.value)),i=h(()=>new Y(s.value,e.value).findPossibles());return(u,l)=>(a(),o($,null,[Z,p(w,{onUpdateContent:l[0]||(l[0]=r=>t.value=r.content)}),n("div",null,[n("label",null,[v(n("input",{type:"radio",value:"tail","onUpdate:modelValue":l[1]||(l[1]=r=>e.value=r)},null,512),[[x,e.value]]),_("末尾一致")]),n("label",null,[v(n("input",{type:"radio",value:"head","onUpdate:modelValue":l[2]||(l[2]=r=>e.value=r)},null,512),[[x,e.value]]),_("先頭一致")]),n("label",null,[v(n("input",{type:"radio",value:"all","onUpdate:modelValue":l[3]||(l[3]=r=>e.value=r)},null,512),[[x,e.value]]),_("両方")])]),p(Q,{found:g(i)},null,8,["found"])],64))}};class te{constructor(t,e,s){this.start=Number(t),this.end=Number(e),this.delta=Number(s)}apply(t){return t.map(e=>{const s=new P(e),u=new T(s.address).adjust(this.start,this.end,this.delta),l=s.address.length?s.name+s.separator+u:s.name;return{origin:e,adjusted:l,isModified:s.address!=u}})}}const ne=d=>(N("data-v-ea83557e"),d=d(),B(),d),se=ne(()=>n("h2",null,"ノンブル加算減算",-1)),le={class:"config"},re={key:0},ae={__name:"PlusMinus",setup(d){const t=f(""),e=f(1),s=f(999),i=f(1),u=h(()=>A(t.value)),l=h(()=>new te(e.value,s.value,i.value).apply(u.value)),r=h(()=>l.value.filter(b=>b.isModified)),j=h(()=>t.value.length<1?"":r.value.length?r.value.length+"件の変更があります。":"修正箇所はありません。"),E=h(()=>l.value.map(b=>b.adjusted).join(`
`));return(b,c)=>(a(),o($,null,[se,n("ul",le,[n("li",null,[_("開始 "),v(n("input",{type:"number",min:"1","onUpdate:modelValue":c[0]||(c[0]=m=>e.value=m)},null,512),[[V,e.value]])]),n("li",null,[_("終了 "),v(n("input",{type:"number",min:"1","onUpdate:modelValue":c[1]||(c[1]=m=>s.value=m)},null,512),[[V,s.value]])]),n("li",null,[_("増分 "),v(n("input",{type:"number","onUpdate:modelValue":c[2]||(c[2]=m=>i.value=m)},null,512),[[V,i.value]])])]),p(w,{onUpdateContent:c[3]||(c[3]=m=>t.value=m.content)}),p(F,{result:g(E)},null,8,["result"]),n("div",null,[n("h4",null,y(g(j)),1),g(r).length?(a(),o("ul",re,[(a(!0),o($,null,L(g(r),(m,U)=>(a(),o("li",{key:U},[p(I,{from:m.origin,to:m.adjusted},null,8,["from","to"])]))),128))])):k("",!0)])],64))}},oe=C(ae,[["__scopeId","data-v-ea83557e"]]),ie={class:"adjust"},ue=n("h1",null,"微調整",-1),ve={__name:"AdjustView",setup(d){return(t,e)=>(a(),o("div",ie,[ue,p(ee),p(S),p(oe),p(S)]))}};export{ve as default};
