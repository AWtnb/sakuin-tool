import{C as l}from"./SimpleTextarea-f5fde6cf.js";import{_ as f,o as c,a as m,e as g,b as d,r as p}from"./index-6f70afa7.js";class o{constructor(e,s=!1){this.rawStr=e.trim(),this.hyphenated=s,this.intValue=Number(this.rawStr.replace(/[^\d]/g,""))}getPrefix(){const e=this.rawStr;return e.length&&isNaN(e.at(0))?e.split(/\d+/).at(0):""}getSuffix(){const e=this.rawStr;return e.length&&isNaN(e.at(-1))?e.split(/\d+/).at(-1):""}adjust(e){this.intValue+=Number(e)}getText(){return this.hyphenated?"–":this.getPrefix()+String(this.intValue)+this.getSuffix()}getId(){return`text:${this.getText()}-value:${this.intValue}`}}class u{constructor(e){this.nombres=e}order(){const e=this.nombres;this.nombres=e.filter(s=>s.getText()).sort((s,t)=>s.intValue-t.intValue)}unify(){const e=this.nombres,s=[];this.nombres=e.filter(t=>{const r=t.getId();return s.includes(r)?!1:(s.push(r),!0)})}isConsecutiveTriplet(e){if(this.nombres.length-3<e)return!1;const s=this.nombres[e],t=this.nombres[e+1],r=this.nombres[e+2];return s.intValue+1==t.intValue&&s.intValue+2==r.intValue&&t.getPrefix().length<1&&t.getSuffix().length<1}hyphenate(){if(!(this.nombres.length<3)){this.nombres[0].hyphenated=!1;for(let e=0;e<this.nombres.length-2;e++)this.nombres[e+1].hyphenated=this.isConsecutiveTriplet(e);this.nombres.at(-1).hyphenated=!1}}getText(){return this.nombres.map(e=>e.getText()).join(", ").replace(/, (\u2013, )+/g,"–")}}class w{constructor(e){this.nombres=[],e.replace(/\s/g,"").replace(/\uff0c/g,",").replace(/[\u002d\u2010\u2011\u2012\u2013\u2014\uFF0D]+/g,"-").replace(/[\uff21-\uff3a\uff41-\uff5a\uff10-\uff19]/g,function(t){return String.fromCharCode(t.charCodeAt(0)-65248)}).split(",").map(t=>t.trim()).filter(Boolean).forEach(t=>{if(t.indexOf("-")!=-1){this.setRangedNombre(t);return}this.nombres.push(new o(t,!1))})}setRangedNombre(e){const[s,t,...r]=e.split("-");if(s.length&&t.length){const a=new o(s,!1),n=new o(t,!1);this.nombres.push(a);for(let h=a.intValue+1;h<n.intValue;h++)this.nombres.push(new o(String(h),!0));this.nombres.push(n)}}formatAll(){const e=new u(this.nombres);return e.order(),e.unify(),e.hyphenate(),e.getText()}adjust(e,s,t){const r=this.nombres.map(n=>(e<=n.intValue&&n.intValue<=s&&e&&n.adjust(t),n));return new u(r).getText()}}const b={name:"ResultBox",props:{result:{type:String}},components:{CopyButton:l}},_={class:"box"},x=["value"];function S(i,e,s,t,r,a){const n=p("CopyButton");return c(),m("div",_,[g("textarea",{value:s.result,placeholder:"result",readonly:""},null,8,x),d(n,{copyStr:s.result},null,8,["copyStr"])])}const B=f(b,[["render",S],["__scopeId","data-v-3a24d0d5"]]);class y{constructor(e){this.reg=new RegExp("(（.+?）|［.+?］|\\(.+?\\)|\\[.+?\\])$"),this.name=e}getBasename(){const e=this.name.replace(this.reg,"").trim();return this.getReferTo().length?e.split("→")[0].trim().replace(/\u3000{1,2}/,""):e.replace(/\u3000{1,2}/,"")}getRefBasename(){return this.name.split("→")[0].trim()}getSource(){const e=this.name.match(this.reg);return e?e[0].slice(1,-1).trim().replace(/\uff0c/g,",").split(",").map(t=>t.trim()).filter(Boolean):[]}getReferTo(){const e=this.name.split("→").filter(s=>s.trim().length>0);return e.length==2?e.at(-1).trim():""}}class T{constructor(e,s="　　"){this.rawStr=e,this.isChild=e.trim().length>0&&e.trimStart()!=e,this.separator=s,this.elems=this.rawStr.split(this.separator).filter(Boolean).map(r=>String(r)),this.name=this.getName();const t=new y(this.name);this.basename=t.getBasename(),this.address=this.getAddress(),this.backLink=t.getSource(),this.referTo=t.getReferTo(),this.isReference=this.referTo.length&&this.name.length&&this.address.length<1}getLeftSide(){return this.elems.length>=2?this.elems.length>2?this.elems.slice(0,-1).join(this.separator):this.elems[0]:this.elems.length==1?this.elems[0]:""}getName(){const e=this.getLeftSide().trim();return e.length<1?"":(this.isChild?"　":"")+e}getRightSide(){return this.elems.length>=2?this.elems.length>2?this.elems.at(-1):this.elems[1]:""}getAddress(){return this.getRightSide().trim()}}export{w as A,T as E,B as R};
